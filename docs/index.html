<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analyze Dependency Heaviness of R Packages • pkgndep</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Analyze Dependency Heaviness of R Packages">
<meta property="og:description" content="A new metric named dependency heaviness is proposed that measures the number 
    of additional dependency packages that a parent package brings to its child package 
    and are unique to the dependency packages imported by all other parents.  
    The dependency heaviness analysis is visualized by a customized heatmap. 
    The package is described in &lt;doi:10.1093/bioinformatics/btac449&gt;. We have also performed 
    the dependency heaviness analysis on the CRAN/Bioconductor package ecosystem and the results 
    are implemented as a web-based database which provides comprehensive tools for 
    querying dependencies of individual R packages.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">pkgndep</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.99.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/pkgndep.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/co_heaviness.html">Co-heaviness of two parent packages</a>
    </li>
    <li>
      <a href="articles/database.html">The database of heaviness analysis on the CRAN/Bioconductor ecosystem</a>
    </li>
    <li>
      <a href="articles/suggestions.html">Suggestions for optimizing package dependencies</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jokergoo/pkgndep/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="analyzing-dependency-heaviness-of-r-packages">Analyzing Dependency Heaviness of R Packages<a class="anchor" aria-label="anchor" href="#analyzing-dependency-heaviness-of-r-packages"></a>
</h1></div>
<p><a href="https://github.com/jokergoo/pkgndep/actions" class="external-link"><img src="https://github.com/jokergoo/pkgndep/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a> <a href="https://cran.r-project.org/web/packages/pkgndep/index.html" class="external-link"><img src="https://www.r-pkg.org/badges/version/pkgndep" alt="CRAN"></a></p>
<p>When developing R packages, we should try to avoid directly setting dependencies on “heavy packages”. The “heaviness” for a package means, the number of additional dependency packages it brings to. If your package directly depends on a heavy package, it would bring several consequences:</p>
<ol style="list-style-type: decimal">
<li>Users need to install a lot of additional packages when installing your package which brings the risk that installation of some packages may fail and it makes your package cannot be installed.</li>
<li>The namespaces that are loaded into your R session after loading your package will be huge (you can see the loaded namespaces by <code><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo()</a></code>).</li>
<li>You package will be “heavy” as well and it may take long time to load your package.</li>
</ol>
<p>In the DESCRIPTION file of your package, there are “direct dependency pakcages” listed in the <code>Depends</code>, <code>Imports</code> and <code>LinkingTo</code> fields. There are also “indirect dependency packages” that can be found recursively for each of the direct dependency packages. Here what we called “dependency packages” are the union of the direct and indirect dependency packages.</p>
<p>There are also packages listed in <code>Suggests</code> and <code>Enhances</code> fields in DESCRIPTION file, but they are not enforced to be installed when installing your package. Of course, they also have “indirect dependency packages”. To get rid of the heavy packages that are not often used in your package, it is better to move them into the <code>Suggests</code>/<code>Enhances</code> fields and to load/install them only when they are needed.</p>
<p>Here the <strong>pkgndep</strong> package checks the heaviness of the dependency packages of your package. For each package listed in the <code>Depends</code>, <code>Imports</code>, <code>LinkingTo</code> and <code>Suggests</code>/<code>Enhances</code> fields in the DESCRIPTION file, <strong>pkgndep</strong> checks how many additional packages your package requires. The summary of the dependency is visualized by a customized heatmap.</p>
<p>As an example, I am developing a package called <a href="https://github.com/jokergoo/cola/" class="external-link"><strong>cola</strong></a> which depends on <a href="https://github.com/jokergoo/ComplexHeatmap/blob/master/DESCRIPTION" class="external-link">a lot of other packages</a>. The dependency heatmap looks like follows:</p>
<div class="figure">
<img src="https://user-images.githubusercontent.com/449218/140655626-f2062b6e-c11f-4dc0-b6b9-d954feffc4ad.png" alt=""><p class="caption">image</p>
</div>
<p>In the heatmap, rows are the packages listed in <code>Depends</code>, <code>Imports</code> and <code>Suggests</code> fields, columns are the additional dependency packages required for each row package. The barplots on the right show the number of required package, the number of imported functions/methods/classes (parsed from NAMESPACE file) and the quantitative measure “heaviness” (the definition of heaviness will be introduced later).</p>
<p>We can see if all the packages are put in the <code>Depends</code> or <code>Imports</code> field (i.e. movig all suggsted packages to <code>Imports</code>), in total 248 packages are required, which are really a lot. Actually some of the heavy packages such as <strong>WGCNA</strong>, <strong>clusterProfiler</strong> and <strong>ReactomePA</strong> (the last three packages in the heatmap rows) are not very frequently used in <strong>cola</strong>, moving them to <code>Suggests</code> field and using them only when they are needed greatly helps to reduce the heaviness of <strong>cola</strong>. Now the number of required packages are reduced to only 64.</p>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>Gu Z. et al., pkgndep: a tool for analyzing dependency heaviness of R packages. Bioinformatics 2022. <a href="https://doi.org/10.1093/bioinformatics/btac449" class="external-link uri">https://doi.org/10.1093/bioinformatics/btac449</a></p>
<p>Gu Z, On the Dependency Heaviness of CRAN/Bioconductor Ecosystem. arXiv 2022. <a href="https://doi.org/10.48550/arXiv.2208.11674" class="external-link uri">https://doi.org/10.48550/arXiv.2208.11674</a></p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The <strong>pkgndep</strong> package can be installed from CRAN by</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pkgndep"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>To use this package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jokergoo/pkgndep" class="external-link">pkgndep</a></span><span class="op">)</span></span>
<span><span class="va">pkg</span> <span class="op">=</span> <span class="fu"><a href="reference/pkgndep.html">pkgndep</a></span><span class="op">(</span><span class="st">"package-name"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/dependency_heatmap.html">dependency_heatmap</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pkg</span> <span class="op">=</span> <span class="fu"><a href="reference/pkgndep.html">pkgndep</a></span><span class="op">(</span><span class="st">"path-of-the-package"</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/dependency_heatmap.html">dependency_heatmap</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span></span></code></pre></div>
<p>An executable example:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jokergoo/pkgndep" class="external-link">pkgndep</a></span><span class="op">)</span></span>
<span><span class="va">pkg</span> <span class="op">=</span> <span class="fu"><a href="reference/pkgndep.html">pkgndep</a></span><span class="op">(</span><span class="st">"ComplexHeatmap"</span><span class="op">)</span></span>
<span><span class="va">pkg</span></span></code></pre></div>
<pre><code><span><span class="co">## ComplexHeatmap, version 2.9.4</span></span>
<span><span class="co">## 30 additional packages are required for installing 'ComplexHeatmap'</span></span>
<span><span class="co">## 117 additional packages are required if installing packages listed in all fields in DESCRIPTION</span></span></code></pre>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/dependency_heatmap.html">dependency_heatmap</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="https://user-images.githubusercontent.com/449218/140655659-2ca142c5-067f-4f76-a0d2-00d0aea49c96.png" alt=""><p class="caption">image</p>
</div>
</div>
<div class="section level2">
<h2 id="heaviness-database">Heaviness database<a class="anchor" aria-label="anchor" href="#heaviness-database"></a>
</h2>
<p>There is an integrated dependency heaviness database for all R packages for a lot of R/Bioc versions. The database can be obtained by:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/heaviness_database.html">heaviness_database</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT @ Zuguang Gu</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=pkgndep" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/jokergoo/pkgndep/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing pkgndep</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Zuguang Gu <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-7395-8709" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Zuguang Gu.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
