<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Check the Heaviness of Package Dependencies • pkgndep</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Check the Heaviness of Package Dependencies">
<meta property="og:description" content="It checks the heaviness of a package's dependencies, i.e. number of 
    additional packages that are required for each of the direct dependency packages. 
    For each package listed in the &quot;Depends&quot;, &quot;Imports&quot;, &quot;LinkingTo&quot;, &quot;Suggests&quot; and
    &quot;Enhances&quot; fields in the DESCRIPTION file, it checks how many additional packages 
    it brings in. The summary of the dependency is visualized by a customized heatmap.
    It additionally creates a website that contains global package dependency
    analysis for all packages on CRAN and Bioconductor (retrieved on 2021-10-28).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">pkgndep</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/pkgndep.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jokergoo/pkgndep/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="check-the-heaviness-of-package-dependencies" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#check-the-heaviness-of-package-dependencies" class="anchor"></a>Check the Heaviness of Package Dependencies</h1></div>

<p>When developing R packages, we should try to avoid directly setting dependencies on “heavy packages”. The “heaviness” for a package means, the number of additional dependency packages it brings to. If your package directly depends on a heavy package, it would bring several consequences:</p>
<ol>
<li>Users need to install a lot of additional packages when installing your package which brings the risk that installation of some packages may fail and it makes your package cannot be installed.</li>
<li>The namespaces that are loaded into your R session after loading your package will be huge (you can see the loaded namespaces by <code><a href="https://rdrr.io/r/utils/sessionInfo.html">sessionInfo()</a></code>).</li>
<li>You package will be “heavy” as well and it may take long time to load your package.</li>
</ol>
<p>In the DESCRIPTION file of your package, there are “direct dependency pakcages” listed in the <code>Depends</code>, <code>Imports</code> and <code>LinkingTo</code> fields. There are also “indirect dependency packages” that can be found recursively for each of the direct dependency packages. Here what we called “dependency packages” are the union of the direct and indirect dependency packages.</p>
<p>There are also packages listed in <code>Suggests</code> and <code>Enhances</code> fields in DESCRIPTION file, but they are not enforced to be installed when installing your package. Of course, they also have “indirect dependency packages”. To get rid of the heavy packages that are not often used in your package, it is better to move them into the <code>Suggests</code>/<code>Enhances</code> fields and to load/install them only when they are needed.</p>
<p>Here the <strong>pkgndep</strong> package checks the heaviness of the dependency packages of your package. For each package listed in the <code>Depends</code>, <code>Imports</code>, <code>LinkingTo</code> and <code>Suggests</code>/<code>Enhances</code> fields in the DESCRIPTION file, <strong>pkgndep</strong> checks how many additional packages your package requires. The summary of the dependency is visualized by a customized heatmap.</p>
<p>As an example, I am developing a package called <a href="https://github.com/jokergoo/cola/"><strong>cola</strong></a> which depends on <a href="https://github.com/jokergoo/ComplexHeatmap/blob/master/DESCRIPTION">a lot of other packages</a>. The dependency heatmap looks like follows:</p>
<p><img src="https://user-images.githubusercontent.com/449218/140655626-f2062b6e-c11f-4dc0-b6b9-d954feffc4ad.png" alt="image"></p>
<p>In the heatmap, rows are the packages listed in <code>Depends</code>, <code>Imports</code> and <code>Suggests</code> fields, columns are the additional dependency packages required for each row package. The barplots on the right show the number of required package, the number of imported functions/methods/classes (parsed from NAMESPACE file) and the quantitative measure “heaviness” (the definition of heaviness will be introduced later).</p>
<p>We can see if all the packages are put in the <code>Depends</code> or <code>Imports</code> field (i.e. movig all suggsted packages to <code>Imports</code>), in total 248 packages are required, which are really a lot. Actually some of the heavy packages such as <strong>WGCNA</strong>, <strong>clusterProfiler</strong> and <strong>ReactomePA</strong> (the last three packages in the heatmap rows) are not very frequently used in <strong>cola</strong>, moving them to <code>Suggests</code> field and using them only when they are needed greatly helps to reduce the heaviness of <strong>cola</strong>. Now the number of required packages are reduced to only 64.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Prior to installing this package, you’ll need to install the Bioconductor package <a href="https://bioconductor.org/packages/release/bioc/html/ComplexHeatmap.html"><strong>ComplexHeatmap</strong></a> by</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">BiocManager</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/BiocManager/man/install.html">install</a></span><span class="op">(</span><span class="st">"ComplexHeatmap"</span><span class="op">)</span></code></pre></div>
<p>The <strong>pkgndep</strong> package can be installed from CRAN by</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"pkgndep"</span><span class="op">)</span></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>To use this package:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jokergoo/pkgndep">pkgndep</a></span><span class="op">)</span>
<span class="va">pkg</span> <span class="op">=</span> <span class="fu"><a href="reference/pkgndep.html">pkgndep</a></span><span class="op">(</span><span class="st">"package-name"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pkg</span> <span class="op">=</span> <span class="fu"><a href="reference/pkgndep.html">pkgndep</a></span><span class="op">(</span><span class="st">"path-to-the-package"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span></code></pre></div>
<p>An executable example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jokergoo/pkgndep">pkgndep</a></span><span class="op">)</span>
<span class="va">pkg</span> <span class="op">=</span> <span class="fu"><a href="reference/pkgndep.html">pkgndep</a></span><span class="op">(</span><span class="st">"ComplexHeatmap"</span><span class="op">)</span>
<span class="va">pkg</span></code></pre></div>
<pre><code>## ComplexHeatmap, version 2.9.4
## 30 additional packages are required for installing 'ComplexHeatmap'
## 117 additional packages are required if installing packages listed in all fields in DESCRIPTION</code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">pkg</span><span class="op">)</span></code></pre></div>
<p><img src="https://user-images.githubusercontent.com/449218/140655659-2ca142c5-067f-4f76-a0d2-00d0aea49c96.png" alt="image"></p>
</div>
<div id="a-global-dependency-analysis-on-all-packages-on-cranbioconductor" class="section level2">
<h2 class="hasAnchor">
<a href="#a-global-dependency-analysis-on-all-packages-on-cranbioconductor" class="anchor"></a>A global dependency analysis on all packages on CRAN/Bioconductor</h2>
<p><strong>pkgndep</strong> also integrates an web-based database of the dependency analysis of all pacakges on CRAN/Bioconductor. The packages of the analysis were retrieved on 2021-10-28. The database can be opened by the <code><a href="reference/dependency_website.html">dependency_website()</a></code> function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/dependency_website.html">dependency_website</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Following is a demonstration of the database.</p>
<p><img src="https://user-images.githubusercontent.com/449218/143590960-68efee7e-3d99-439c-aaec-573e6ef15ea4.gif" alt="pkgndep_db"></p>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>MIT @ Zuguang Gu</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=pkgndep">https://​cloud.r-project.org/​package=pkgndep</a>
</li>
<li>Browse source code at <br><a href="https://github.com/jokergoo/pkgndep/">https://​github.com/​jokergoo/​pkgndep/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Zuguang Gu <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-7395-8709" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/jokergoo/pkgndep/actions"><img src="https://github.com/jokergoo/pkgndep/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://cran.r-project.org/web/packages/pkgndep/index.html"><img src="https://www.r-pkg.org/badges/version/pkgndep" alt="CRAN"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Zuguang Gu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
